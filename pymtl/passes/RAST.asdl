-- RAST description in Zephyr ASDL
-- identifier, int, string, object, bool are the five built-in types of
-- Zephyr ASDL

module RAST
{
  mod  = CombUpblk( stmt* body )

  stmt = Assign( expr target, expr value )
       | AugAssign( expr target, operator op, expr value )
       | If( expr cond, stmt* body, stmt* orelse )
       | For( loopvar_decl var, expr start, expr end, expr step, stmt* body )

  expr = Number( int nbits, int value )
       | IfExp( expr cond, expr body, expr orelse )
       | UnaryOp( unaryop op, expr operand )
       | BoolOp( boolop op, expr* values )
       | BinOp( expr left, operator op, expr right )
       | Compare( expr left, cmpop op, expr right )

       -- Only the following types of nodes can appear in the LHS of
       -- an assignment
       | Attribute( expr value, identifier attr )
       | Index( expr value, expr idx )
       | Slice( expr value, expr lower, expr upper )
       | Module( object module )
       | LoopVar( string name )
       | FreeVar( string name )

  loopvar_decl = LoopVarDecl( string name )

  unaryop = Invert | Not | UAdd | USub

  boolop = And | Or

  operator = Add | Sub | Mult | Div | Mod | Pow | ShiftLeft | ShiftRightLogic | BitAnd | BitOr | BitXor

  cmpop = Eq | NotEq | Lt | LtE | Gt | GtE
}
